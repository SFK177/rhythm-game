<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>館長の神ゲー</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(#0f2027,#203a43);
  color:white;
  text-align:center;
}

#circle{
  width:160px;
  height:160px;
  border-radius:50%;
  margin:40px auto;
  background:red;
  box-shadow:0 0 40px rgba(0,0,0,0.5);
}

button{
  font-size:20px;
  padding:10px 20px;
}
</style>
</head>

<body>

<h2>館長の神ゲー<br>赤を押したらいやん</h2>

<div id="score">Score:0</div>
<div id="circle"></div>

<button onclick="startGame()">スタート</button>

<script>

const GAS_URL="https://script.google.com/macros/s/AKfycbxvmVtjmGDgewahlPtg-VnxIpee24NAEffgnpyLcMZPwEY4xbefdV24PdbWUTqVoA6K/exec";

let score=0;
let playing=false;

function startGame(){
 score=0;
 playing=true;
 document.getElementById("score").innerText="Score:0";
 next();
 setTimeout(endGame,15000);
}

function next(){
 if(!playing) return;

 let colors=["red","blue","green","yellow"];
 let c=colors[Math.floor(Math.random()*colors.length)];

 let circle=document.getElementById("circle");
 circle.style.background=c;

 circle.onclick=()=>{
   if(!playing) return;

   if(c==="red"){
     score--;
   }else{
     score++;
   }
   document.getElementById("score").innerText="Score:"+score;
   next();
 }
}

function endGame(){
 playing=false;

 let name=prompt("名前入れて下さい");
 if(!name) name="名無し";

 fetch(GAS_URL,{
   method:"POST",
   mode:"no-cors",
   headers:{"Content-Type":"application/json"},
   body:JSON.stringify({
     Name:name,
     Score:score,
     Game:"判断ゲーム",
     Date:new Date().toLocaleString()
   })
 });

 alert("終了！ Score:"+score);
}
</script>
</body>
</html>
