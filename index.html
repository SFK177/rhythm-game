<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>赤を押したらいやん</title>

<style>
body{
    margin:0;
    font-family:sans-serif;
    text-align:center;
    color:white;
    background:linear-gradient(270deg,#0f2027,#203a43,#2c5364);
    background-size:600% 600%;
    animation:bg 10s ease infinite;
}
@keyframes bg{
0%{background-position:0% 50%;}
50%{background-position:100% 50%;}
100%{background-position:0% 50%;}
}

h1{font-size:32px;margin:10px;}

#circle{
    width:180px;
    height:180px;
    border-radius:50%;
    margin:40px auto;
    box-shadow:0 0 20px black inset;
}

button{
    font-size:20px;
    padding:10px 25px;
    border-radius:10px;
}

#msg{font-size:26px;height:30px;}
</style>
</head>

<body>

<h1>館長の神ゲー<br>赤を押したらいやん</h1>

<div id="score">Score:0</div>
<div id="circle"></div>
<div id="msg"></div>

<button onclick="start()">スタート</button>

<script>

const URL="https://script.google.com/macros/s/AKfycbzSt5ojOfCBkLGf4wr7SQpTaYbnxLe5n0PTa0CRxYaEO64EXhajH94CunkZb_kNrbEN/exec"

let score=0
let combo=0
let running=false

function start(){
 score=0
 combo=0
 running=true
 next()
}

function next(){
 if(!running)return

 const colors=["blue","green","red"]
 const c=colors[Math.floor(Math.random()*3)]
 circle.style.background=c

 circle.onclick=()=>{
    if(c==="blue"){
        score+=10+combo
        combo++
        msg.textContent="いいよ"
    }
    if(c==="green"){
        score+=20+combo
        combo++
        msg.textContent="さいこー"
    }
    if(c==="red"){
        score=0
        combo=0
        msg.textContent="いやーん"
    }
    scoreDisplay()
    setTimeout(next,300)
 }
}

function scoreDisplay(){
 document.getElementById("score").textContent="Score:"+score
}

window.onbeforeunload=sendScore

function sendScore(){
 const name=prompt("名前入力（ランキング送信）")
 if(!name)return

 fetch(URL,{
  method:"POST",
  body:JSON.stringify({
    name:name,
    score:score,
    game:"判断ゲーム"
  })
 })
}

</script>
</body>
</html>
